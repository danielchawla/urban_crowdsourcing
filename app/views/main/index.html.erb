<!-- Header -->
<header id="top" class="header">
    <div class="text-vertical-center">
        <h1>Urban Crowdsource</h1>
        <h3>Designing Our City Together</h3>
        <br>
        <a href="#how-it-works" class="btn btn-dark btn-lg">Start Now</a>
    </div>
</header>


<!--<% if user_signed_in? %>
    <%= link_to "Logout" , destroy_user_session_path, :method => 'DELETE' %>
    <% else %>
    <%= link_to "Sign in" , new_user_session_path  %> 
    <%= link_to "Sign up" , new_user_registration_path %> 
<%end%> -->

<!-- How It Works -->
<section id="how-it-works" class="how-it-works">
    <div class="container-main">
        <div class="row text-center">
            <div class="col-lg-12 ">
                <h1>How it Works</h1>
                <hr class="small">
                <div class="row">
                    <div class="col-md-4 col-sm-6">
                        <i class="fa fa-sign-in fa-5x"></i>
                        <div class="steps">
                            <h2>1. Log In / Sign Up</h2><br/>
                            <p>Signing up for Urban Crowdsource is easy. All you need is a valid e-mail address and a smile.</p> 
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <i class="fa fa-pencil fa-5x"></i>
                        <div class="steps">
                            <h2>2. Create A Suggestion</h2><br/>
                            <p>Fill out the form describing the design change you would. New bike route? Renovating the community center? Submit it here. Attach a photo of where you like to see the change take place and hit submit. </p>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <i class="fa fa-comments fa-5x"></i>
                        <div class="steps">
                            <h2>3. Engage</h2><br/>
                            <p>Vote and comment on other Suggestions fellow residents have made.</p>
                        </div>
                    </div>
                </div>
                <!-- /.row (nested) -->
            </div>
            <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-main -->
</section>

<!-- Call to Action -->
<section id="call-to-action" class="call-to-action bg-primary">
    <div class="container-main">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <% if user_signed_in? %>
                        <h1>Improve Your City</h1>
                        <hr class="small">
                        <a href="/suggestions" class="btn btn-lg btn-dark">New Suggestion</a>

                    <% else %>
                        <h1>Improve Your City</h1>
                        <hr class="small">
                        <a href="/users/sign_in" class="btn btn-lg btn-dark">Log &nbsp In</a>
                        <a href="/users/sign_up" class="btn btn-lg btn-dark">Sign Up</a>
                    <% end %>
                    <br/>
                    <br/>
                    <br/>
                    <a href="#about" class="btn btn-md btn-dark">What Is Urban Crowdsource?</a>
                </div>
            </div>
        </div>
</section>




<!-- About -->
<section id="about" class="about">
    <div class="text-center">
        <h1>What Is Urban Crowdsource?</h1>
            <hr class="small">
            <div class="container-main">
                <p>City design impacts every resident. It tells you how you far must travel to reach the grocery store, whether you’ll walk, drive, or take public transport there, and how long your commute will take. It plays a significant role in your day to day life. Urban planners have the responsibility for making decisions that will affect your day to day life. They face one common challenge: knowing what you want. <br/><br/>Urban Crowdsource is a platform that connects you to your local urban designers. Have an idea to improve your city? Here’s the place to share it. Maybe your neighborhood could benefit from a new basketball court, a renovated park, or an injection of trash cans. Urban Crowdsource empowers you to share these ideas online where they can then be vetted by your community and shared with your local urban designers. </p>
            </div>
            <br/>
            <a href="#latest-suggestions" class="btn btn-lg btn-dark">Latest Suggestions</a>
    </div>
</section>

<!-- Callout -->
<aside class="callout bg-primary">
    <div class="text-vertical-center">
        <h2>"Crowdsourcing solves problems by connecting people online who otherwise would never meet."</h2>
        <br/>
        <div class="container-main">
        </div>
    </div>
</aside>



<!-- Our Team -->
<!-- <section id="our-team" class="our-team">
    <div class="container-main">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 text-center">
                <h2>Crowdsourcing Urban Design in Cape Town</h2>
                <hr class="small">
                    <div class="videoWrapper">
                      <iframe width="853" height="480" src="https://www.youtube.com/embed/HlPpcx7Pg0M?autohide=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                    </div>
            </div>
            <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-main -->
</section> -->

<!-- Lastest Suggestions -->
<section id="latest-suggestions" class="latest-suggestions">
    <div class="container-main">
        <div class="row text-center">
            <div class="col-lg-10 col-lg-offset-1">
                <h1>Latest Suggestions</h1>
                <hr class="small">
                <div class="row">
                <%if Suggestion.all[-1] != nil%>
                    <div class="col-md-3 col-sm-6">
                        <div class="suggestions-item">
                            <h4>
                                <strong><%= Suggestion.all[-1][:overview].titlecase %></strong>
                            </h4>
                            <p><%= Suggestion.all[-1][:description] %></p> 
                            <a href="/suggestions/<%= Suggestion.all[-1][:id] %>" class="btn btn-primary">Read More</a>  
                        </div>
                    </div>
                <%end%>
                <%if Suggestion.all[-2] != nil%>
                    <div class="col-md-3 col-sm-6">
                        <div class="suggestions-item">
                            <h4>
                                <strong><%= Suggestion.all[-2][:overview].titlecase %></strong>
                            </h4>
                            <p><%= Suggestion.all[-2][:description] %></p>
                            <a href="/suggestions/<%= Suggestion.all[-2][:id] %>" class="btn btn-primary">Read More</a>  
                        </div>
                    </div>
                <%end%>
                <%if Suggestion.all[-3] != nil%>
                    <div class="col-md-3 col-sm-6">
                        <div class="suggestions-item">
                            <h4>
                                <strong><%= Suggestion.all[-3][:overview].titlecase %></strong>
                            </h4>
                            <p><%= Suggestion.all[-3][:description] %></p>
                            <a href="/suggestions/<%= Suggestion.all[-3][:id] %>" class="btn btn-primary">Read More</a>  
                        </div>
                    </div>
                <%end%>
                <%if Suggestion.all[-4] != nil%>
                    <div class="col-md-3 col-sm-6">
                        <div class="suggestions-item">
                            <h4>
                                <strong><%= Suggestion.all[-4][:overview].titlecase %></strong>
                            </h4>
                            <p><%= Suggestion.all[-4][:description] %></p>
                            <a href="/suggestions/<%= Suggestion.all[-4][:id] %>" class="btn btn-primary">Read More</a>  
                        </div>
                    </div>
                <%end%>
                </div>
                <!-- /.row (nested) -->
            </div>
            <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-main -->
</section>






<!-- Map -->
<section id="contact" class="map bg-primary">
    <div class="text-center">
        <h1>Map</h1>
        <hr class="small">
    </div>
    <div id='maap'>
        <script type="text/javascript">
            function getScrollBarWidth () {
        var $outer = $('<div>').css({visibility: 'hidden', width: 100, overflow: 'scroll'}).appendTo('body'),
            widthWithScroll = $('<div>').css({width: '100%'}).appendTo($outer).outerWidth();
        $outer.remove();
        return 100 - widthWithScroll;
    };
                $('#maap').css('width', window.innerWidth-getScrollBarWidth());
                $('#maap').css('height', window.innerHeight*.6);
        </script>
          <div id="map" style='width: 800px; height: 450px;'></div>
          <script type="text/javascript">
                $('#map').css('width', window.innerWidth-getScrollBarWidth());
                $('#map').css('height', window.innerHeight*.6);
            </script>
          <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
          <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
    </div>

    <script type="text/javascript">
        go();
    window.addEventListener('resize', go);

    function go(){
        $('#maap').css('width', window.innerWidth-getScrollBarWidth());
        $('#map').css('width', window.innerWidth-getScrollBarWidth());
        $('#maap').css('height', window.innerHeight*.6);
        $('#map').css('height', window.innerHeight*.6);
      
    }
    </script>

    <script type="text/javascript">
    handler = Gmaps.build('Google');

     handler.buildMap({ provider: {scrollwheel: false}, internal: {id: 'map'}}, function() {
      markers = handler.addMarkers(<%=raw(@suggestion_pins.to_json)%>);

      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
    </script>
</section>


